# 后端程序员 go语言学习第一课

## 后端程序员为什么选择go？

- 语法简单，入门快
- 编译型语言，性能高，语言原生支持并发对后端程序员很有吸引力
- 开发效率高，对于写api的后端程序员来说，golang的开发效率非常接近python，php等脚本语言
- 社区活跃，大牛项目多，高质量的代码都可以任意阅读 （etcd，docker，k8s）

## 看一个demo

```
package main
import (
    "io"
    "net/http"
)
func helloHandler(w http.ResponseWriter, req *http.Request) {
    io.WriteString(w, "hello, world!\n")
}

func main() {
    http.Handle("/", helloHandler)
    http.ListenAndServe(":8888", nil)
}
```

```
go run main.go
```

浏览器或者curl 访问下 http://localhost:8888  会显示 hello, world



## 做下基准测试 100个client 请求1w次的结果  （环境 deepin golang 1.12.1  no nginx）
```
ab -n 10000 -c 100 http://localhost:8888/
```
## 结果

```
Concurrency Level:      100
Time taken for tests:   0.425 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      1310000 bytes
HTML transferred:       140000 bytes
Requests per second:    23556.40 [#/sec] (mean)
Time per request:       4.245 [ms] (mean)
Time per request:       0.042 [ms] (mean, across all concurrent requests)
Transfer rate:          3013.56 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    2   0.4      2       4
Processing:     1    2   0.6      2       6
Waiting:        0    2   0.6      2       5
Total:          2    4   0.5      4       8

Percentage of the requests served within a certain time (ms)
  50%      4
  66%      4
  75%      4
  80%      4
  90%      5
  95%      5
  98%      6
  99%      6
 100%      8 (longest request)
```

#和php7.2比一下   （环境 deepin linux nginx1.13.12 100 static php7.2-fpm） 

```
ab -n 10000 -c 100 http://localhost/index.php
```

## 代码
index.php
``` 
<?php

echo "hello world";
```

## 结果
```
Concurrency Level:      100
Time taken for tests:   0.702 seconds
Complete requests:      10000
Failed requests:        0
Total transferred:      1490000 bytes
HTML transferred:       110000 bytes
Requests per second:    14237.51 [#/sec] (mean)
Time per request:       7.024 [ms] (mean)
Time per request:       0.070 [ms] (mean, across all concurrent requests)
Transfer rate:          2071.67 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.6      1       4
Processing:     1    4   3.6      3     192
Waiting:        1    4   3.5      3     174
Total:          1    5   3.5      4     192

Percentage of the requests served within a certain time (ms)
  50%      4
  66%      5
  75%      6
  80%      6
  90%      8
  95%      9
  98%     12
  99%     21
 100%    192 (longest reques）
 ```

 ## 对比结果 golang 在简单的helloworld 下qps大概是 php7.2的2呗


## golang 的web程序编译完之后就一个可执行文件，不依赖第三方库，这个可执行文件可以在任意linux 系统上运行 不需要而外配置环境变量，这个和c和c++ 编译完的程序运行方式不太一样，c和c++ 即使是完全静态编译后，还需要看libc版本是不是一样。