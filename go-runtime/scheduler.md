# go的调度器


## GMP调度模型

- G表示Goroutine；
- M表示一个操作系统的线程；
- P表示一个CPU处理器，通常P的数量等于CPU核数（GOMAXPROCS）。

![](../img/scheduler-1.png)

如上图所示
- 全局队列的作用是负载均衡（Balance）。
- M需要和P绑定后不停的执行G的任务。
- P本地有个任务队列，可以无锁状态下执行高效操作。当本地队列为空时会尝试去全局队列去获取G，如果全局队列也为空，这个时候从其他有g的p哪里偷取一半g过来，放到自己的P本地队列。
- M和P并不一定是一一对应的，通常P数量是等于GOMAXPROCS，M的数量则由调度器的监控线程决定的。



## 参考资料

[Go调度器系列（3）图解调度原理](https://segmentfault.com/a/1190000018775901)